import Content from "../../content";
import Code from "../../code";
import solidDemoCode from "./index.tsx?raw";
import Walkthrough from "../../walkthrough";
import CodeLink from "../../code-link";

<Content>
    <h2 className="subtitle">Code</h2>

    This demo requires you to authenticate with a Solid account.
</Content>

<Code language="tsx" id="RdflibSolidDemo" code={solidDemoCode} className="line-numbers">
    <Walkthrough>
        <tr>
            <td>
                <CodeLink id="RdflibSolidDemo" lines={["8-11"]}>Store setup</CodeLink>
            </td>
            <td>
                When working with online resources we want to make use of `Fetcher` and `UpdateManager` to respectively
                load and update the resources.
            </td>
        </tr>
        <tr>
            <td>
                <CodeLink id="RdflibSolidDemo" lines={["17"]}>Loading data and setting name</CodeLink>
            </td>
            <td>
                Using the fetcher we load the resource, and once it's done fetching we find the name (if set). An
                important side-effect here is that `store` is updated as well with `fetcher.load`.
            </td>
        </tr>
        <tr>
            <td>
                <CodeLink id="RdflibSolidDemo" lines={["21-24"]}>Submitting data and updating name</CodeLink>
            </td>
            <td>
                Upon submitting the form, a new triple with the name is inserted while the old name is removed in
                another triple. The updated store is then posted to the online resource, where rdflib.js will break
                down the updates into a [SPARQL Update](https://www.w3.org/TR/sparql11-update/) query. After
                successfully updating the resource, we make sure to update the name internally.
            </td>
        </tr>
    </Walkthrough>
</Code>